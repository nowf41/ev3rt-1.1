/**
 * UART sensor driver
 */
KERNEL_DOMAIN {

ATT_INI({ TA_NULL, 0, initialize_uart_dri });

CFG_INT(INTNO_UART_PORT1, { TA_NULL, INTPRI_UART_PORT1 });
CFG_INT(INTNO_UART_PORT2, { TA_NULL, INTPRI_UART_PORT2 });
CFG_INT(INTNO_UART_PORT3, { TA_NULL, INTPRI_UART_PORT3 });
CFG_INT(INTNO_UART_PORT4, { TA_NULL, INTPRI_UART_PORT4 });

CRE_ISR(ISR_UART_PORT2, { TA_NULL, INTNO_UART_PORT2, INTNO_UART_PORT2, uart_sensor_isr, TMIN_ISRPRI });
CRE_ISR(ISR_UART_PORT3, { TA_NULL, INTNO_UART_PORT3, INTNO_UART_PORT3, uart_sensor_isr, TMIN_ISRPRI });
CRE_ISR(ISR_UART_PORT4, { TA_NULL, INTNO_UART_PORT4, INTNO_UART_PORT4, uart_sensor_isr, TMIN_ISRPRI });

CRE_SEM(SUART1_SEM, { TA_NULL, 1, 1 });
CRE_SEM(SUART2_SEM, { TA_NULL, 1, 1 });

CRE_CYC(UART_SENSOR_CYC, { TA_NULL, { TNFY_HANDLER, 0, uart_sensor_cyc }, PERIOD_UART_SENSOR_CYC, 0 });

ATT_MOD("uart_dri.o", { TACP_KERNEL, TACP_SHARED, TACP_KERNEL, TACP_KERNEL });
ATT_MOD("pru.o", { TACP_KERNEL, TACP_SHARED, TACP_KERNEL, TACP_KERNEL });
ATT_MOD("suart_utils.o", { TACP_KERNEL, TACP_SHARED, TACP_KERNEL, TACP_KERNEL });
ATT_MOD("suart_api.o", { TACP_KERNEL, TACP_SHARED, TACP_KERNEL, TACP_KERNEL });
ATT_MOD("pru_suart.o", { TACP_KERNEL, TACP_SHARED, TACP_KERNEL, TACP_KERNEL });

DEF_SVC(TFN_UART_SENSOR_CONFIG, { TA_NULL, extsvc_uart_sensor_config, 1024 });

}

AID_ISR(1); // ISR for Port 1 is created dynamically.

